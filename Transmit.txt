packet = [function_code]
packet.append(function_code)
packet.append(param 1)
packet.append(param n)
buffer.append(packet)

Call periodically:
if is_busy:
	if ready received:
		is_busy = False
if not is_busy:
	send(buffer[0])
	buffer.pop()
	scara.is_busy = True
